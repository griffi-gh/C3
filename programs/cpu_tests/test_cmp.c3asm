%jump(to)
	LD D,${to}
	JP D
%end
%jump_cond(to,cond)
	LD D,${to}
	JP ${cond},D
%end

LD A,0x1234
LD B,0x1234
CMP A,B
LD C,0x1111
!jump_cond(:fail,NZ)
ADD A,0
LD C,0x2222
!jump_cond(:fail,NZ)

:succ
LD A,0x6F
LD B,0x6B
IOWRT A
IOTRIG
IOWRT B
IOTRIG
LD A,0x6969
LD B,A
LD C,A
LD D,A

:fail	
STOP
STOP

